let w=!1;function y(t="/learn",r="Select category"){const n=document.getElementById("category-button"),s=document.getElementById("category-dropdown"),a=document.getElementById("clear-filters");!n||!s||(n.onclick=()=>{const e=!(n.getAttribute("aria-expanded")==="true");n.setAttribute("aria-expanded",e.toString()),s.hidden=!e},s.onclick=o=>{const e=o.target.closest("[role='option']");if(!e)return;const c=e.getAttribute("data-value"),g=c?`${t}${t==="/learn"?"/categories":"/category"}/${c}`:t;E(g,t,r),n.setAttribute("aria-expanded","false"),s.hidden=!0},a&&(a.onclick=()=>{E(t,t,r);const o=document.querySelector("#category-button span");if(o){o.textContent=r;const e=Array.from(o.classList).find(c=>c.includes("selected"));e&&o.classList.remove(e)}}),C(r),w||(document.addEventListener("click",o=>{const e=document.getElementById("category-button"),c=document.getElementById("category-dropdown");e&&c&&!e.contains(o.target)&&!c.contains(o.target)&&(e.setAttribute("aria-expanded","false"),c.hidden=!0)}),document.addEventListener("keydown",o=>{const e=document.getElementById("category-dropdown"),c=document.getElementById("category-button");o.key==="Escape"&&e&&e.hidden===!1&&(c.setAttribute("aria-expanded","false"),e.hidden=!0)}),w=!0))}function C(t="Select category"){const r=document.querySelector("#category-button span"),n=document.getElementById("clear-filters");if(!n||!r)return;const a=r.textContent?.trim()!==t;n.style.display=a?"inline-flex":"none"}function E(t,r,n="Select category"){const s=document.getElementById("category-map"),a=s?JSON.parse(s.textContent):{},o=t.includes("/search/");fetch(t).then(e=>e.text()).then(e=>{const c=new DOMParser().parseFromString(e,"text/html"),p=c.querySelector("[class*='filter']"),g=c.querySelector("[data-articles-wrapper]")||c.querySelector(".articles-wrapper"),f=document.querySelector("[class*='filter']"),S=document.querySelector("[data-articles-wrapper]")||document.querySelector(".articles-wrapper");p&&f&&(f.innerHTML=p.innerHTML),g&&S&&S.replaceWith(g),window.history.pushState({},"",t);let m=n;if(!o){const d=t.split("/"),l=r==="/learn"?"/categories":"/category",u=t.includes(`${r}${l}`)?decodeURIComponent(d[d.length-1]):null;m=a[u]||n}const i=document.querySelector("#category-button span");if(i){i.textContent=m;const d=Array.from(i.classList).find(l=>l.includes("selected"));if(m===n)d&&i.classList.remove(d);else if(!d){const l=Array.from(i.classList).find(u=>u.includes("label"));if(l){const u=l.replace("label","selected");i.classList.add(u)}}}y(r,n),window.initSearchInputs&&window.initSearchInputs(),setTimeout(()=>{C(n)},100)})}document.readyState!=="loading"?y():document.addEventListener("DOMContentLoaded",y);document.addEventListener("astro:page-load",y);window.initCategoryFilter=y;export{y as i};
