let w=!1;function i(n="/learn",r="Select category"){const o=document.getElementById("category-button"),s=document.getElementById("category-dropdown"),d=document.getElementById("clear-filters");!o||!s||(o.onclick=()=>{const e=!(o.getAttribute("aria-expanded")==="true");o.setAttribute("aria-expanded",e.toString()),s.hidden=!e},s.onclick=t=>{const e=t.target.closest("[role='option']");if(!e)return;const c=e.getAttribute("data-value"),l=c?`${n}${n==="/learn"?"/categories":"/category"}/${c}`:n;E(l,n,r),o.setAttribute("aria-expanded","false"),s.hidden=!0},d&&(d.onclick=()=>{E(n,n,r);const t=document.querySelector("#category-button span");if(t){t.textContent=r;const e=Array.from(t.classList).find(c=>c.includes("selected"));e&&t.classList.remove(e)}}),C(r),w||(document.addEventListener("click",t=>{const e=document.getElementById("category-button"),c=document.getElementById("category-dropdown");e&&c&&!e.contains(t.target)&&!c.contains(t.target)&&(e.setAttribute("aria-expanded","false"),c.hidden=!0)}),document.addEventListener("keydown",t=>{const e=document.getElementById("category-dropdown"),c=document.getElementById("category-button");t.key==="Escape"&&e&&e.hidden===!1&&(c.setAttribute("aria-expanded","false"),e.hidden=!0)}),w=!0))}function C(n="Select category"){const r=document.querySelector("#category-button span"),o=document.getElementById("clear-filters");if(!o)return;const s=r?.textContent?.trim()!==n;o.style.display=s?"inline-flex":"none"}function E(n,r,o="Select category"){const s=document.getElementById("category-map"),d=s?JSON.parse(s.textContent):{};fetch(n).then(t=>t.text()).then(t=>{const e=new DOMParser().parseFromString(t,"text/html"),c=e.querySelector(".filters"),g=e.querySelector("[data-articles-wrapper]"),l=document.querySelector(".filters"),m=document.querySelector("[data-articles-wrapper]");c&&l&&l.replaceWith(c),g&&m&&m.replaceWith(g),window.history.pushState({},"",n);const f=n.split("/"),b=r==="/learn"?"/categories":"/category",B=n.includes(`${r}${b}`)?decodeURIComponent(f[f.length-1]):null,S=d[B]||o,a=document.querySelector("#category-button span");if(a){a.textContent=S;const y=Array.from(a.classList).find(u=>u.includes("selected"));if(S===o)y&&a.classList.remove(y);else if(!y){const u=Array.from(a.classList).find(p=>p.includes("label"));if(u){const p=u.replace("label","selected");a.classList.add(p)}}}C(o),i(r,o),window.initSearchInputs&&window.initSearchInputs()})}document.readyState!=="loading"?i():document.addEventListener("DOMContentLoaded",i);document.addEventListener("astro:page-load",i);window.initCategoryFilter=i;export{i};
